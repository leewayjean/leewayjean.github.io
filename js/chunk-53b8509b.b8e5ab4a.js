(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53b8509b"],{"1ce8":function(t,s,o){},5863:function(t,s,o){"use strict";o.r(s);var e=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("section",{staticClass:"food"},[o("section",{ref:"categories_wrapper",staticClass:"categories_wrapper"},[o("ul",{staticClass:"food_categories"},t._l(t.foodList,(function(s,e){return o("li",{key:s.id,staticClass:"categories_item",class:{activeClass:t.currentIndex==e},on:{click:function(s){return t.scrollToElement(e)}}},[t._v(t._s(s.name))])})),0)]),o("section",{ref:"food_wrapper",staticClass:"food_wrapper"},[o("section",t._l(t.foodList,(function(s){return o("div",{key:s.id,staticClass:"list_item"},[o("h3",{staticClass:"title"},[t._v(" "+t._s(s.name)+" "),o("span",{staticClass:"title_info"},[t._v(t._s(s.description))])]),o("ul",t._l(s.foods,(function(s){return o("li",{key:s.item_idd,staticClass:"food_info"},[o("img",{staticClass:"food_img",attrs:{src:"//elm.cangdu.org/img/"+s.image_path,alt:""}}),o("section",[o("h5",{staticClass:"food_name"},[t._v(t._s(s.name))]),o("p",{staticClass:"food_des"},[t._v(t._s(s.description))]),o("p",{staticClass:"food_tips"},[t._v(t._s(s.tips))]),o("section",{staticClass:"buy_container"},[o("span",{staticClass:"price"},[s.specfoods[0].price?o("span",{staticClass:"icon"},[t._v("￥")]):t._e(),t._v(" "+t._s(s.specfoods[0].price)+" ")]),s.specfoods.length>1?o("span",{staticClass:"add_btn",on:{click:t.selected}},[t._v("选规格")]):o("CartControl",{attrs:{foodItem:s.specfoods[0]}})],1)])])})),0)])})),0)]),o("footer",[t.isShowCart&&t.cartFoods.length>0?o("CartDetail",{attrs:{foodList:t.cartFoods}}):t._e(),o("span",{staticClass:"cart",style:{backgroundColor:t.cartFoods.length>0?"#0089dc":"#535356"},on:{click:function(s){t.isShowCart=!0}}},[t.foodCount?o("span",{staticClass:"count"},[t._v(t._s(t.foodCount))]):t._e(),o("i",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true"}})]),o("section",{staticClass:"cart_container"},[o("section",{staticClass:"total"},[o("p",{staticClass:"price"},[t._v("￥"+t._s(t.totalPrice)+"元")]),o("p",{staticClass:"fee"},[t._v("配送费5元")])]),o("span",{staticClass:"payBtn",style:{backgroundColor:t.cartFoods.length>0?"#4cd946":"#535356"}},[t._v("去结算")])])],1),t.isShowCart&&t.cartFoods.length>0?o("div",{staticClass:"layer_mask",on:{click:function(s){t.isShowCart=!1}}}):t._e(),t.isShow?o("section",{staticClass:"pop_mask",on:{"~click":function(s){return s.stopPropagation(),s.preventDefault(),t.closeAlert(s)}}},[o("section",{staticClass:"content"},[o("header",[o("span",[t._v("我问问")]),o("span",{on:{"~click":function(s){return s.stopPropagation(),s.preventDefault(),t.closeAlert(s)}}},[t._v("×")])]),t._m(0),t._m(1)])]):t._e()])},a=[function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("main",[o("h3",[t._v("规格")]),o("div",[o("span",[t._v("默认")]),o("span",[t._v("啊")])])])},function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("footer",[o("span",{staticClass:"price"},[o("span",[t._v("￥")]),t._v("20 ")]),o("span",{staticClass:"add"},[t._v("加入购物车")])])}],i=(o("4160"),o("159b"),o("229e")),c=o("8ba8"),n=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"cart_control"},[t.foodItem.count>0?o("span",{staticClass:"circle first_circle",on:{click:t.decreaseFood}},[o("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]):t._e(),t.foodItem.count>0?o("span",{staticClass:"count"},[t._v(t._s(t.foodItem.count))]):t._e(),o("span",{staticClass:"circle",on:{click:t.increaseFood}},[o("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])])},r=[],l={name:"CartControl",props:{foodItem:{type:Object,required:!0}},methods:{increaseFood:function(){this.foodItem.count?this.foodItem.count++:this.$set(this.foodItem,"count",1)},decreaseFood:function(){this.foodItem.count?this.foodItem.count--:this.$set(this.foodItem,"count",1)}}},f=l,u=(o("b5b8"),o("2877")),d=Object(u["a"])(f,n,r,!1,null,"49ec720c",null),_=d.exports,p=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("section",{staticClass:"cart_detail"},[t._m(0),o("ul",{staticClass:"food_list"},t._l(t.foodList,(function(s,e){return o("li",{key:e,staticClass:"food_item"},[o("span",{staticClass:"name"},[t._v(t._s(s.name))]),o("span",{staticClass:"price"},[t._v("￥"+t._s(s.price))]),o("CartControl",{attrs:{foodItem:s}})],1)})),0)])},h=[function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("header",[o("span",{staticClass:"title"},[t._v("购物车")]),o("span",{staticClass:"clear_btn"},[t._v("清空")])])}],C={props:{foodList:{type:Array,required:!0}},components:{CartControl:_}},m=C,v=(o("d238"),Object(u["a"])(m,p,h,!1,null,"98a6948c",null)),g=v.exports,w={name:"Food",data:function(){return{cart:[],foodList:[],id:this.$route.query.id,listHeight:[],foodScroll:{},menuScroll:{},scrollY:0,isShowCart:!1,isShow:!1}},computed:{totalPrice:function(){return this.$store.getters.totalPrice},foodCount:function(){return this.$store.getters.foodCount},cartFoods:function(){var t=[];return this.foodList.forEach((function(s){s.foods.forEach((function(s){s.specfoods.forEach((function(s){s.count>0&&t.push(s)}))}))})),t},currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var s=this.listHeight[t],o=this.listHeight[t+1];if(this.scrollY>=s&&this.scrollY<o)return t}return 0}},watch:{cartFoods:function(t,s){this.$store.commit("UPDATE_CARTLIST",this.cartFoods),t.length<1&&(this.isShowCart=!1)}},methods:{selected:function(){this.isShow=!0},closeAlert:function(){this.isShow&&(this.isShow=!1)},scrollToElement:function(t){var s=this.$refs.food_wrapper.getElementsByClassName("list_item");this.foodScroll.scrollToElement(s[t],200)},initScroll:function(){this.menuScroll=new i["a"](this.$refs.categories_wrapper,{click:!0}),this.foodScroll=new i["a"](this.$refs.food_wrapper,{click:!0,probeType:3})},calculateHeight:function(){var t=this.$refs.food_wrapper.getElementsByClassName("list_item"),s=0,o=[];o.push(s);for(var e=0;e<t.length;e++)s+=t[e].clientHeight,o.push(s);this.listHeight=o}},created:function(){var t=this;Object(c["f"])(this.id).then((function(s){t.foodList=s.data,console.log(t.foodList),t.$parent.successLoadData=!0,t.$nextTick((function(){t.initScroll(),t.calculateHeight(),t.foodScroll.on("scroll",(function(s){t.scrollY=Math.abs(Math.round(s.y))}))}))}))},components:{CartControl:_,CartDetail:g}},b=w,k=(o("d091"),Object(u["a"])(b,e,a,!1,null,"d0e70ec4",null));s["default"]=k.exports},"8a97":function(t,s,o){},b5b8:function(t,s,o){"use strict";var e=o("8a97"),a=o.n(e);a.a},b5e2:function(t,s,o){},d091:function(t,s,o){"use strict";var e=o("b5e2"),a=o.n(e);a.a},d238:function(t,s,o){"use strict";var e=o("1ce8"),a=o.n(e);a.a}}]);
//# sourceMappingURL=chunk-53b8509b.b8e5ab4a.js.map