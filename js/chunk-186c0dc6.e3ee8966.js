(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-186c0dc6"],{"59cd":function(t,s,o){"use strict";o.r(s);var a=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("section",{staticClass:"food"},[o("nav",{ref:"navbarWrapper",staticClass:"navbar-wrapper"},[o("ul",{staticClass:"navbar"},t._l(t.foodList,(function(s,a){return o("li",{key:s.id,staticClass:"navbar-item",class:{activeClass:t.currentIndex==a},on:{click:function(s){return t.scrollToElement(a)}}},[t._v(t._s(s.name))])})),0)]),o("section",{ref:"foodWrapper",staticClass:"food-wrapper"},[o("section",{staticClass:"food-categories"},t._l(t.foodList,(function(s){return o("div",{key:s.id,staticClass:"food-categories-item"},[o("header",{staticClass:"food-categories-title"},[o("span",[t._v(t._s(s.name))]),o("span",{staticClass:"food-categories-desc"},[t._v(t._s(s.description))])]),o("ul",{staticClass:"food-list"},t._l(s.foods,(function(s){return o("li",{key:s.item_idd,staticClass:"food-list-item"},[o("img",{staticClass:"food-item-img",attrs:{src:"//elm.cangdu.org/img/"+s.image_path,alt:"商品图片",loading:"lazy"}}),o("section",{staticClass:"food-item-info"},[o("h5",{staticClass:"food-item-name"},[t._v(t._s(s.name))]),o("p",{staticClass:"food-item-desc"},[t._v(t._s(s.description))]),o("p",{staticClass:"food-item-tips"},[t._v(t._s(s.tips))]),o("section",{staticClass:"food-price-container"},[o("span",{staticClass:"food-item-price"},[s.specfoods[0].price?o("span",{staticClass:"food-unit-icon"},[t._v("￥")]):t._e(),t._v(" "+t._s(s.specfoods[0].price)+" ")]),s.specfoods.length>1?o("span",{staticClass:"addcart-btn",on:{click:function(o){return t.selected(s.specfoods)}}},[t._v("选规格")]):o("CartControl",{attrs:{foodItem:s.specfoods[0]}})],1)])])})),0)])})),0)]),t.isShow?o("SelectedFood",{attrs:{foods:t.selectedFood}}):t._e(),o("footer",{staticClass:"cart"},[t.isShowCart&&t.cartFoods.length>0?o("CartDetail",{attrs:{foodList:t.cartFoods}}):t._e(),o("span",{staticClass:"cart-icon-wrapper",style:{backgroundColor:t.cartFoods.length>0?"#38bb8b":"#535356"},on:{click:function(s){t.isShowCart=!0}}},[t.foodCount?o("span",{staticClass:"cart-food-count"},[t._v(t._s(t.foodCount))]):t._e(),o("i",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true"}})]),o("section",{staticClass:"cart-details"},[o("section",{staticClass:"cart-cost"},[o("p",{staticClass:"cart-total-price"},[t._v("￥"+t._s(t.totalPrice)+"元")]),o("p",{staticClass:"cart-delivery-fee"},[t._v("配送费5元")])]),o("router-link",{staticClass:"cart-pay-btn",style:{backgroundColor:t.cartFoods.length>0?"#38b88b":"#535356"},attrs:{tag:"span",to:"/confirmOrder"}},[t._v("去结算")])],1)],1),t.isShowCart&&t.cartFoods.length>0?o("div",{staticClass:"cart-layer-mask",on:{click:function(s){t.isShowCart=!1}}}):t._e()],1)},e=[],i=(o("4160"),o("159b"),o("229e")),c=o("8ba8"),n=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"cart-control"},[t.foodItem.count>0?o("span",{staticClass:"cart-circle-btn cart-minus-btn",on:{click:t.decreaseFood}},[o("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]):t._e(),t.foodItem.count>0?o("span",{staticClass:"cart-count"},[t._v(t._s(t.foodItem.count))]):t._e(),o("span",{staticClass:"cart-circle-btn",on:{click:t.increaseFood}},[o("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])])},r=[],l={name:"CartControl",props:{foodItem:{type:Object,required:!0}},methods:{increaseFood:function(){this.foodItem.count?this.foodItem.count++:this.$set(this.foodItem,"count",1)},decreaseFood:function(){this.foodItem.count?this.foodItem.count--:this.$set(this.foodItem,"count",1)}}},d=l,f=(o("b0ce"),o("2877")),u=Object(f["a"])(d,n,r,!1,null,"61b91bc2",null),p=u.exports,h=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("section",{staticClass:"cart-details-container"},[t._m(0),o("ul",{staticClass:"cart-food-list"},t._l(t.foodList,(function(s,a){return o("li",{key:a,staticClass:"food-list-item"},[o("span",{staticClass:"food-name"},[t._v(t._s(s.name))]),o("span",{staticClass:"food-price"},[t._v("￥"+t._s(s.price))]),o("CartControl",{attrs:{foodItem:s}})],1)})),0)])},C=[function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("header",[o("span",{staticClass:"cart-title"},[t._v("购物车")]),o("span",{staticClass:"clear-cart-btn"},[t._v("清空")])])}],m={props:{foodList:{type:Array,required:!0}},components:{CartControl:p}},_=m,v=(o("ba8a"),Object(f["a"])(_,h,C,!1,null,"6f9fa56a",null)),b=v.exports,g=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("section",{staticClass:"select-food-container",on:{click:function(s){s.stopPropagation(),t.$parent.isShow=!1}}},[o("section",{staticClass:"select-food-main"},[t._m(0),o("main",{staticClass:"food-options"},[o("h3",{staticClass:"food-options-title"},[t._v("规格")]),o("ul",{staticClass:"food-options-list"},t._l(t.foods,(function(s,a){return o("li",{key:a,staticClass:"food-options-item",class:{activeClass:t.currentIndex==a},on:{click:function(s){t.currentIndex=a}}},[t._v(t._s(s.name))])})),0)]),t._m(1)])])},w=[function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("header",[o("span",{staticClass:"food-name"},[t._v("我问问")]),o("em",{staticClass:"close-btn"},[t._v("×")])])},function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("footer",[o("span",{staticClass:"food-price"},[t._v("￥20")]),o("span",{staticClass:"add-btn"},[t._v("加入购物车")])])}],k={props:{foods:{type:Array,required:!0}},data:function(){return{currentIndex:0}}},S=k,y=(o("cebf"),Object(f["a"])(S,g,w,!1,null,"60d70497",null)),$=y.exports,F={name:"Food",data:function(){return{cart:[],foodList:[],id:this.$route.query.id,listHeight:[],foodScroll:{},menuScroll:{},scrollY:0,isShowCart:!1,selectedFood:[],isShow:!1}},computed:{totalPrice:function(){return this.$store.getters.totalPrice},foodCount:function(){return this.$store.getters.foodCount},cartFoods:function(){var t=[];return this.foodList.forEach((function(s){s.foods.forEach((function(s){s.specfoods.forEach((function(s){s.count>0&&t.push(s)}))}))})),t},currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var s=this.listHeight[t],o=this.listHeight[t+1];if(this.scrollY>=s&&this.scrollY<o)return t}return 0}},watch:{cartFoods:function(t){this.$store.commit("UPDATE_CARTLIST",this.cartFoods),t.length<1&&(this.isShowCart=!1)}},methods:{selected:function(t){this.selectedFood=t,this.isShow=!0},closeAlert:function(){this.isShow&&(this.isShow=!1)},scrollToElement:function(t){var s=this.$refs.foodWrapper.getElementsByClassName("food-categories-item");this.foodScroll.scrollToElement(s[t],200)},initScroll:function(){this.menuScroll=new i["a"](this.$refs.navbarWrapper,{click:!0}),this.foodScroll=new i["a"](this.$refs.foodWrapper,{click:!0,probeType:3})},calculateHeight:function(){var t=this.$refs.foodWrapper.getElementsByClassName("food-categories-item"),s=0,o=[];o.push(s);for(var a=0;a<t.length;a++)s+=t[a].clientHeight,o.push(s);this.listHeight=o},loadData:function(){var t=this;Object(c["f"])(this.id).then((function(s){console.log(s.data),t.foodList=s.data,t.$nextTick((function(){t.initScroll(),t.calculateHeight(),t.foodScroll.on("scroll",(function(s){t.scrollY=Math.abs(Math.round(s.y))}))}))}))}},created:function(){this.loadData()},components:{CartControl:p,CartDetail:b,SelectedFood:$}},I=F,E=(o("e4a9"),Object(f["a"])(I,a,e,!1,null,"b31aea8c",null));s["default"]=E.exports},"8dbb":function(t,s,o){},b0ce:function(t,s,o){"use strict";var a=o("dd13"),e=o.n(a);e.a},b22e:function(t,s,o){},ba8a:function(t,s,o){"use strict";var a=o("f390"),e=o.n(a);e.a},cebf:function(t,s,o){"use strict";var a=o("8dbb"),e=o.n(a);e.a},dd13:function(t,s,o){},e4a9:function(t,s,o){"use strict";var a=o("b22e"),e=o.n(a);e.a},f390:function(t,s,o){}}]);
//# sourceMappingURL=chunk-186c0dc6.e3ee8966.js.map