(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08978e84"],{"159b":function(t,s,e){var i=e("da84"),o=e("fdbc"),n=e("17c2"),a=e("9112");for(var c in o){var r=i[c],l=r&&r.prototype;if(l&&l.forEach!==n)try{a(l,"forEach",n)}catch(f){l.forEach=n}}},"17c2":function(t,s,e){"use strict";var i=e("b727").forEach,o=e("b301");t.exports=o("forEach")?function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},4160:function(t,s,e){"use strict";var i=e("23e7"),o=e("17c2");i({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},5863:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"food"},[e("section",{ref:"categories_wrapper",staticClass:"categories_wrapper"},[e("ul",{staticClass:"food_categories"},t._l(t.foodList,(function(s,i){return e("li",{key:s.id,staticClass:"categories_item",class:{activeClass:t.currentIndex==i},on:{click:function(s){return t.scrollToElement(i)}}},[t._v(t._s(s.name))])})),0)]),e("section",{ref:"food_wrapper",staticClass:"food_wrapper"},[e("section",t._l(t.foodList,(function(s){return e("div",{key:s.id,staticClass:"list_item"},[e("h3",{staticClass:"title"},[t._v(" "+t._s(s.name)+" "),e("span",{staticClass:"title_info"},[t._v(t._s(s.description))])]),e("ul",t._l(s.foods,(function(s){return e("li",{key:s.item_idd,staticClass:"food_info"},[e("img",{staticClass:"food_img",attrs:{src:"//elm.cangdu.org/img/"+s.image_path,alt:""}}),e("section",[e("h5",{staticClass:"food_name"},[t._v(t._s(s.name))]),e("p",{staticClass:"food_des"},[t._v(t._s(s.description))]),e("p",{staticClass:"food_tips"},[t._v(t._s(s.tips))]),e("section",{staticClass:"buy_container"},[t._m(0,!0),s.specfoods.length>1?e("span",{staticClass:"add_btn",on:{click:t.selected}},[t._v("选规格")]):e("CartControl",{attrs:{foodItem:s}})],1)])])})),0)])})),0)]),t._m(1),t.isShow?e("section",{staticClass:"pop_mask",on:{"~click":function(s){return s.stopPropagation(),s.preventDefault(),t.closeAlert(s)}}},[e("section",{staticClass:"content"},[e("header",[e("span",[t._v("我问问")]),e("span",{on:{"~click":function(s){return s.stopPropagation(),s.preventDefault(),t.closeAlert(s)}}},[t._v("×")])]),t._m(2),t._m(3)])]):t._e()])},o=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"price"},[e("span",{staticClass:"icon"},[t._v("￥")]),t._v("20 ")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("footer",[e("span",{staticClass:"cart"},[e("i",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true"}})]),e("section",{staticClass:"cart_container"},[e("section",{staticClass:"total"},[e("p",{staticClass:"price"},[t._v("￥4200元")]),e("p",{staticClass:"fee"},[t._v("配送费5元")])]),e("span",{staticClass:"payBtn"},[t._v("去结算")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("main",[e("h3",[t._v("规格")]),e("div",[e("span",[t._v("默认")]),e("span",[t._v("啊")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("footer",[e("span",{staticClass:"price"},[e("span",[t._v("￥")]),t._v("20 ")]),e("span",{staticClass:"add"},[t._v("加入购物车")])])}],n=(e("4160"),e("159b"),e("229e")),a=e("8ba8"),c=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cart_control"},[t.foodItem.count>0?e("span",{staticClass:"circle first_circle",on:{click:t.decreaseFood}},[e("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]):t._e(),t.foodItem.count>0?e("span",{staticClass:"count"},[t._v(t._s(t.foodItem.count))]):t._e(),e("span",{staticClass:"circle",on:{click:t.increaseFood}},[e("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])])},r=[],l={name:"CartControl",props:{foodItem:{type:Object,required:!0}},methods:{increaseFood:function(){this.foodItem.count?this.foodItem.count++:this.$set(this.foodItem,"count",1)},decreaseFood:function(){this.foodItem.count?this.foodItem.count--:this.$set(this.foodItem,"count",1)}}},f=l,u=(e("b5b8"),e("2877")),d=Object(u["a"])(f,c,r,!1,null,"49ec720c",null),h=d.exports,p={name:"Food",data:function(){return{cart:[],foodList:[],id:this.$route.query.id,listHeight:[],foodScroll:{},menuScroll:{},scrollY:0,isShow:!1}},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var s=this.listHeight[t],e=this.listHeight[t+1];if(this.scrollY>=s&&this.scrollY<e)return t}return 0},cartFoods:function(){var t=this,s=[];return this.foodList.forEach((function(e){e.foods.forEach((function(e){e.count>0&&(t.$store.commit("ADD_FOOD",e),s.push(e))}))})),s}},methods:{selected:function(){this.isShow=!0},closeAlert:function(){this.isShow&&(this.isShow=!1)},scrollToElement:function(t){var s=this.$refs.food_wrapper.getElementsByClassName("list_item");this.foodScroll.scrollToElement(s[t],200)},initScroll:function(){this.menuScroll=new n["a"](this.$refs.categories_wrapper,{click:!0}),this.foodScroll=new n["a"](this.$refs.food_wrapper,{click:!0,probeType:3})},calculateHeight:function(){var t=this.$refs.food_wrapper.getElementsByClassName("list_item"),s=0,e=[];e.push(s);for(var i=0;i<t.length;i++)s+=t[i].clientHeight,e.push(s);this.listHeight=e}},created:function(){var t=this;Object(a["f"])(this.id).then((function(s){t.foodList=s.data,t.$parent.successLoadData=!0,t.$nextTick((function(){t.initScroll(),t.calculateHeight(),t.foodScroll.on("scroll",(function(s){t.scrollY=Math.abs(Math.round(s.y))}))}))}))},components:{CartControl:h}},_=p,m=(e("79f4"),Object(u["a"])(_,i,o,!1,null,"3a19c201",null));s["default"]=m.exports},"79f4":function(t,s,e){"use strict";var i=e("7cc1"),o=e.n(i);o.a},"7cc1":function(t,s,e){},"8a97":function(t,s,e){},b301:function(t,s,e){"use strict";var i=e("d039");t.exports=function(t,s){var e=[][t];return!e||!i((function(){e.call(null,s||function(){throw 1},1)}))}},b5b8:function(t,s,e){"use strict";var i=e("8a97"),o=e.n(i);o.a},b727:function(t,s,e){var i=e("f8c2"),o=e("44ad"),n=e("7b0b"),a=e("50c4"),c=e("65f0"),r=[].push,l=function(t){var s=1==t,e=2==t,l=3==t,f=4==t,u=6==t,d=5==t||u;return function(h,p,_,m){for(var v,C,g=n(h),L=o(g),S=i(p,_,3),b=a(L.length),E=0,w=m||c,y=s?w(h,b):e?w(h,0):void 0;b>E;E++)if((d||E in L)&&(v=L[E],C=S(v,E,g),t))if(s)y[E]=C;else if(C)switch(t){case 3:return!0;case 5:return v;case 6:return E;case 2:r.call(y,v)}else if(f)return!1;return u?-1:l||f?f:y}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},fdbc:function(t,s){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-08978e84.232afa0b.js.map